<html lang="en">
<head>
    <base target="_top">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Carte interactive du campus IAV Hassan II - Rabat</title>
    
    <link rel="stylesheet" href="leaflet.css">
    <script src="leaflet.js"></script>

    <style>
        html, body {
            height: 100%;
            margin: 150;
        }
        .leaflet-container {
            height: 800px;
            width: 800px;
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>

<body>
    <div id="map" style="width: 700px; height: 900px;"></div>

    <script>
        const map = L.map('map').setView([33.9765374, -6.8668853], 15);

        const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // Création d'une icône personnalisée avec le logo de l'IAV
        const esgtIcon = L.icon({
            iconUrl: 'esgt.png', // ton image dans le même dossier
            iconSize: [60, 60],      // taille du logo (tu peux ajuster)
            iconAnchor: [30, 60],    // point du logo qui correspondra à la position du marker
            popupAnchor: [0, -60]    // position de la popup par rapport à l’icône
        });

        // Ajout du marker avec l'icône personnalisée
        const marker = L.marker([33.9765374, -6.8668853], { icon: esgtIcon })
            .addTo(map)
            .bindPopup('<b>Département de Topographie</b><br>Campus IAV Hassan II - Rabat')
            .openPopup();

        marker.on('mouseover', function() {
            this.openPopup();
        });
        marker.on('mouseout', function() {
            this.closePopup();
        });

        const circle = L.circle([33.9765374, -6.8668853], {
            color: 'red',
            fillColor: '#f03',
            fillOpacity: 0,
            radius:250
        }).addTo(map).bindPopup('Buffer250')

        const polygon = L.polygon([
            [33.97620244, -6.86710121],
            [33.97634924, -6.86730964],
            [33.97651615, -6.86714828],
            [33.97650094, -6.86711065],
            [33.97659856, -6.86702574],
            [33.97669458, -6.86715696],
            [33.97676899, -6.86708845],
            [33.97674259, -6.86703635],
            [33.97681500, -6.86695868],
            [33.97675879, -6.86687015],
            [33.97683261, -6.86679561],
            [33.97670598, -6.86659660],
            [33.97662617, -6.86666873],
            [33.97657596, -6.86659708],
            [33.97650034, -6.86667210],
            [33.97655795, -6.86676473],
            [33.97653395, -6.86678500],
            [33.97644113, -6.86664870],
            [33.97632751, -6.86676087],
            [33.97641873, -6.86690657],
            [33.97637952, -6.86693371]
        ], {
            color: '#005f73',
            fillColor: '#0a9396',
            fillOpacity: 0.6
        }).addTo(map)
        .bindPopup('<b>Département de Topographie</b><br>Cliquer pour découvrir la filière.')
        .on('click', function() {
            window.open('topographie.html', '_blank'); 
        })
        .on('mouseover', function() {
            this.setStyle({ fillOpacity: 0.9 });
        })
        .on('mouseout', function() {
            this.setStyle({ fillOpacity: 0.6 });
        });

        const popup = L.popup()
            .setLatLng([33.9765374, -6.8668853])
            .setContent('Click for more info.')
            .openOn(map);

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                
                .openOn(map);
        }

        map.on('click', onMapClick);
    </script>
</body>
</html>

